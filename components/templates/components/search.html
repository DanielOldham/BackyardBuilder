{% extends 'dashboard/base.html' %}
{% block body %}
    <div class="col-8 offset-2 my-4">
        <div class="card">
            <h1 class="card-header text-center">
                <i class="bi bi-list-ul"></i>
                Component List
            </h1>

            <div class="accordion" id="searchAccordion">
                <div class="accordion-item" style="border-radius: 0;">
                    <h2 class="accordion-header" id="headingOne" >
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne" style="border-radius: 0;">
                            <i class="bi bi-search"></i>
                            &nbsp;&nbsp;Search Options
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body">

                            <form action="" method="GET">

                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item py-3">
                                        I would like to search for...
                                    </li>
                                    <li class="list-group-item py-3">

                                        <div class="col-10 offset-1 text-center">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Component" id="allCheck" name="componentRadio" checked>
                                                <label class="form-check-label" for="allCheck">All&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Case" id="caseCheck" name="componentRadio">
                                                <label class="form-check-label" for="caseCheck">Cases&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Cooler" id="coolerCheck" name="componentRadio">
                                                <label class="form-check-label" for="coolerCheck">Coolers&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="CPU" id="cpuCheck" name="componentRadio">
                                                <label class="form-check-label" for="cpuCheck">CPUs&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Graphics" id="graphicsCheck" name="componentRadio">
                                                <label class="form-check-label" for="graphicsCheck">Graphics Cards&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Motherboard" id="moboCheck" name="componentRadio">
                                                <label class="form-check-label" for="moboCheck">Motherboards&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="PowerSupply" id="powerCheck" name="componentRadio">
                                                <label class="form-check-label" for="powerCheck">Power Supplies&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="RAM" id="ramCheck" name="componentRadio">
                                                <label class="form-check-label" for="ramCheck">RAM&nbsp;&nbsp;</label>
                                            </div>

                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" value="Storage" id="storageCheck" name="componentRadio">
                                                <label class="form-check-label" for="storageCheck">Storage Drives&nbsp;&nbsp;</label>
                                            </div>
                                        </div>
                                    </li>

                                    <li class="list-group-item py-3">
                                        <div class="col-10 offset-1">
                                            <div class="input-group">
                                                <span class="input-group-text">Search keyword:</span>
                                                <input class="form-control" type="text" name="keywordInput" placeholder="eg. Ryzen">
                                            </div>
                                        </div>
                                    </li>

                                    <li class="list-group-item py-3">
                                        <div class="col-10 offset-1">
                                            <div class="input-group">
                                                <span class="input-group-text">Price: from</span>
                                                <input class="form-control" type="number" name="lowerPriceInput" placeholder="$0.00">

                                                <span class="input-group-text">to</span>
                                                <input class="form-control" type="number" name="upperPriceInput" placeholder="$100.00">
                                            </div>
                                        </div>
                                    </li>

                                    <li class="list-group-item py-3">
                                        <div class="d-grid gap-2 col-6 mx-auto">
                                            <input type="submit" class="btn btn-block btn-primary" value="Search">
                                        </div>
                                    </li>
                                </ul>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


            {% if not components %}
                <div class="row card-body">
                    <h4 class="card-title text-center">
                        There are no results for your search.
                    </h4>
                    <div class="card-text text-center">
                        <a href="{% url 'components:search' %}">search again</a>
                    </div>
                </div>
            {% else %}
                {% for component in components %}
                    {% if forloop.counter0 == 0 %}
                        <div class="row"><div class="card-group">
                    {% elif forloop.counter0|divisibleby:2 %}
                        </div></div>
                        <div class="row"><div class="card-group">
                    {% endif %}


                    <div class="card" style="border-top: none; border-radius: 0;">
                        <a href="{% url 'components:detail' component.id %}">
                            <img src="{{ component.image.url }}" class="card-img-top px-4 py-2">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title">{{ component.name }}</h5>
                        </div>
                        <div class="card-footer">
                            ${{ component.price }}
                        </div>
                    </div>
                {% endfor %}
                </div></div>

                <div class="card-footer text-center py-3" style="background-color: var(--nav-grey); color: var(--primary-orange);">
                    {% if paginate %}
                        <div class="col-6 offset-3">
                            <div class="input-group">
                                {% if components.has_previous %}
                                    <a href="?page=1" class="btn btn-orange">First</a>
                                    <a href="?page={{ components.previous_page_number }}" class="btn btn-orange">Prev.</a>
                                {% else %}
                                    <a class="btn btn-orange disabled">First</a>
                                    <a class="btn btn-orange disabled">Prev.</a>
                                {% endif %}

                                <div class="form-control text-center" style="background-color: var(--nav-grey); border: 1px solid var(--primary-orange); color: white;">
                                    Page {{ components.number }} of {{ components.paginator.num_pages }}
                                </div>

                                {% if components.has_next %}
                                    <a href="?page={{ components.next_page_number }}" class="btn btn-orange">Next</a>
                                    <a href="?page={{ components.paginator.num_pages }}" class="btn btn-orange">Last</a>
                                {% else %}
                                    <a class="btn btn-orange disabled">Next</a>
                                    <a class="btn btn-orange disabled">Last</a>
                                {% endif %}
                            </div>
                        </div>
                    {% else %}
                        <h5>End of {{ components|length }} result(s)</h5>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}